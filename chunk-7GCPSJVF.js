import{a as oe}from"./chunk-7XIK2RYO.js";import{e as re}from"./chunk-RFCX47G2.js";import{a as ae}from"./chunk-FS44HKH3.js";import{Aa as Y,Da as ee,F as q,Fa as te,Ga as ne,P as O,R as J,S as Z,Sa as ie,b as R,c as j,da as Q,e as U,ga as K,h as V,ha as W,r as H,u as $,x as G,za as X}from"./chunk-QBXRE6UE.js";import{A as I,Bc as F,Mb as l,Nb as n,Ob as t,Pb as p,Tb as A,W as w,Xb as B,Ya as M,Yb as g,Z as C,a as x,ab as r,ca as S,fb as h,ic as _,jc as T,kc as o,lc as f,ma as z,mb as P,mc as u,n as y,na as D,nb as k,nc as N,o as E,rb as m,u as b,zc as L}from"./chunk-JVZZNEUL.js";var de=(()=>{class a{static \u0275fac=function(i){return new(i||a)};static \u0275mod=k({type:a});static \u0275inj=S({imports:[q,O,O]})}return a})();function me(a,s){if(a&1){let e=A();n(0,"button",41),B("click",function(){let d=z(e).index,c=g(3);return D(c.currentImageIndex=d)}),p(1,"img",42),t()}if(a&2){let e=s.$implicit,i=s.index,d=g(3);_("active",i===d.currentImageIndex),r(),l("src",e,M)("alt",d.product.title+" vista "+(i+1))}}function pe(a,s){if(a&1&&(n(0,"div",39),m(1,me,2,4,"button",40),t()),a&2){let e=g(2);r(),l("ngForOf",e.getAllImages())}}function ge(a,s){if(a&1&&(n(0,"span",46),o(1),t()),a&2){let e=s.$implicit,i=g(3);T(i.getPaymentMethodClass(e)),r(),u(" ",e," ")}}function ue(a,s){if(a&1&&(n(0,"div",43)(1,"div",44),m(2,ge,2,3,"span",45),t()()),a&2){let e=g(2);r(2),l("ngForOf",e.getPaymentMethods())}}function he(a,s){if(a&1&&p(0,"app-product-card-small",49),a&2){let e=s.$implicit;l("product",e)}}function fe(a,s){if(a&1&&(n(0,"div",47),m(1,he,1,1,"app-product-card-small",48),t()),a&2){let e=g(2);r(),l("ngForOf",e.relatedProducts)}}function _e(a,s){a&1&&(n(0,"p",50)(1,"mat-icon"),o(2,"inventory_2"),t(),o(3," No hay productos relacionados a esta publicaci\xF3n "),t())}function be(a,s){if(a&1&&(n(0,"main",4)(1,"div",5)(2,"div",6)(3,"nav",7)(4,"a",8),o(5,"Inicio"),t(),n(6,"span",9),o(7,">"),t(),n(8,"span",10),o(9),t(),n(10,"span",9),o(11,">"),t(),n(12,"span",10),o(13),t()()()(),n(14,"div",11)(15,"div",12),m(16,pe,2,1,"div",13),n(17,"div",14),p(18,"img",15),t(),n(19,"div",16)(20,"div",17)(21,"span",18),o(22),t(),n(23,"div",19),o(24),t(),n(25,"h1",20),o(26),t(),n(27,"div",21)(28,"mat-icon",22),o(29,"location_on"),t(),n(30,"span"),o(31),t()(),n(32,"div",23)(33,"mat-icon",24),o(34,"event"),t(),n(35,"span"),o(36),L(37,"date"),t()()(),m(38,ue,3,1,"div",25),t()()(),n(39,"div",26)(40,"h2",27),o(41,"Informaci\xF3n sobre el vendedor"),t(),n(42,"div",28)(43,"div",29)(44,"mat-icon",30),o(45,"person"),t(),n(46,"div",31)(47,"span",32),o(48,"Vendedor"),t(),n(49,"span",33),o(50),t()()(),n(51,"div",29)(52,"mat-icon",30),o(53,"phone"),t(),n(54,"div",31)(55,"span",32),o(56,"N\xFAmero de Tel\xE9fono"),t(),n(57,"span",33),o(58),t()()(),n(59,"div",29)(60,"mat-icon",30),o(61,"email"),t(),n(62,"div",31)(63,"span",32),o(64,"E-mail"),t(),n(65,"span",33),o(66),t()()()()(),n(67,"div",34)(68,"h2",27),o(69,"Informaci\xF3n sobre el producto"),t(),n(70,"div",35)(71,"p"),o(72),t()()(),n(73,"div",36)(74,"h2",27),o(75,"Productos relacionados"),t(),m(76,fe,2,1,"div",37)(77,_e,4,0,"p",38),t()()),a&2){let e=g();r(9),u(" ",(e.product==null?null:e.product.condition)===2?"Nuevo":"Usado"," "),r(4),f(e.getProductType()),r(),_("no-thumbnails",e.getAllImages().length===1),r(2),l("ngIf",e.getAllImages().length>1),r(),_("full",e.getAllImages().length===1),r(),l("src",e.getAllImages()[e.currentImageIndex],M)("alt",e.product.title),r(4),u(" ",e.product.condition===2?"Nuevo":"Usado"," "),r(2),u(" ",e.formatPrice(e.product.price)," "),r(2),f(e.product.title),r(5),f(e.locationName),r(5),u("Publicado el ",F(37,22,e.product.createdAt,"dd/MM/yyyy")),r(2),l("ngIf",e.getPaymentMethods().length>0),r(12),N(" ",e.seller==null?null:e.seller.name," ",e.seller==null?null:e.seller.lastName," "),r(8),u(" ",(e.seller==null?null:e.seller.contactPhone)||"\u2014"," "),r(8),f(e.seller==null?null:e.seller.email),r(6),f(e.product.description),r(4),l("ngIf",e.relatedProducts.length>0),r(),l("ngIf",e.relatedProducts.length===0)}}function ve(a,s){a&1&&(n(0,"div",51)(1,"div",6)(2,"div",52),p(3,"div",53),n(4,"div",54),p(5,"div",55)(6,"div",56)(7,"div",57)(8,"div",58),t()()()())}function xe(a,s){a&1&&(n(0,"div",59)(1,"h2"),o(2,"Publicaci\xF3n no encontrada"),t(),n(3,"button",60),o(4,"Volver al inicio"),t()())}var ce=(()=>{let s=class s{constructor(i,d,c,v,se){this.route=i,this.listingService=d,this.profileService=c,this.authService=v,this.countryService=se,this.product=null,this.seller=null,this.locationName=null,this.currentImageIndex=0,this.isLoading=!0,this.isFavorite=!1,this.relatedProducts=[],this.additionalInfo={relatedSearch:"Muebles antiguos",dimensions:"Medidas: 110 cm de ancho x 51 cm de profundidad x 89 cm de alto."}}ngOnInit(){this.sub=this.route.paramMap.pipe(C(()=>{this.resetState(),this.isLoading=!0}),w(i=>{let d=Number(i.get("id"));return d?I({listing:this.getListingById(d).pipe(),infoR:this.listingService.getListingInfo(d).pipe()}).pipe(b(({listing:c,infoR:v})=>({listing:c,info:v.data})),C({next:()=>{this.isLoading=!1},error:()=>this.isLoading=!1})):E(null)})).subscribe(i=>{if(!i)return;this.product=x(x({},i.listing),i.info),this.locationName=this.countryService.getNameById(i.listing.countryId),this.isFavorite=!1,y(this.profileService.getUser(i.listing.userId)).pipe(b(c=>c.data??null)).subscribe(c=>this.seller=c,()=>this.seller=null);let d=i.info.categories?.map(c=>c.categoryId)??[];this.listingService.listListings({categoryIds:d,notShownListing:this.product.id,notShownUser:this.authService.getCurrentUserId(),page:1,pageSize:4}).subscribe(c=>this.relatedProducts=c.data??[])})}ngOnDestroy(){this.sub?.unsubscribe()}getAllImages(){if(!this.product)return[];let i=[this.product.mainImage,...this.product.auxiliaryImages?.map(d=>d.imgUrl)??[]].filter(d=>!!d);return Array.from(new Set(i))}formatPrice(i){return new Intl.NumberFormat("es-AR",{style:"currency",currency:"ARS",minimumFractionDigits:0}).format(i)}getPaymentMethods(){if(!this.product)return[];let i=[];return this.product.acceptsCash&&i.push("EFECTIVO"),this.product.acceptsBarter&&i.push("TRUEQUE"),this.product.acceptsCard&&i.push("TARJETA"),this.product.acceptsTransfer&&i.push("TRANSFERENCIA"),i}getPaymentMethodClass(i){return{EFECTIVO:"efectivo",TRUEQUE:"trueque",TARJETA:"tarjeta",TRANSFERENCIA:"transferencia"}[i]??""}getProductType(){return this.product?.type==="PRODUCTO"?"C\xF3moda":"Servicio"}getCategoryNames(){return this.product?.categories?.map(i=>i.description).join(", ")??"Muebles"}getListingById(i){return this.listingService.listListings({listingId:i,pageSize:1}).pipe(b(d=>d.data?.find(c=>c.id===i)||null))}resetState(){this.product=null,this.seller=null,this.locationName=null,this.relatedProducts=[],this.currentImageIndex=0}};s.\u0275fac=function(d){return new(d||s)(h(H),h(ae),h(te),h(W),h(K))},s.\u0275cmp=P({type:s,selectors:[["app-product-detail"]],decls:6,vars:3,consts:[[1,"product-detail-page"],["class","main-content",4,"ngIf"],["class","loading-container",4,"ngIf"],["class","not-found",4,"ngIf"],[1,"main-content"],[1,"breadcrumb-container"],[1,"container"],[1,"breadcrumb"],["routerLink","/home",1,"breadcrumb-link"],[1,"breadcrumb-separator"],[1,"breadcrumb-current"],[1,"product-card"],[1,"product-layout"],["class","image-thumbnails",4,"ngIf"],[1,"main-image-container"],["loading","lazy","appDefaultImage","","decoding","async",1,"main-image",3,"src","alt"],[1,"product-info"],[1,"product-info-top"],[1,"condition-badge"],[1,"product-price"],[1,"product-title"],[1,"product-location"],[1,"location-icon"],[1,"product-date"],[1,"date-icon"],["class","payment-methods",4,"ngIf"],[1,"seller-section"],[1,"section-title"],[1,"seller-info-card"],[1,"seller-item"],[1,"seller-icon"],[1,"seller-details"],[1,"seller-label"],[1,"seller-value"],[1,"product-section"],[1,"product-description-card"],[1,"related-products-section"],["class","related-products-grid no-scroll",4,"ngIf"],["class","no-products",4,"ngIf"],[1,"image-thumbnails"],["class","thumbnail-btn",3,"active","click",4,"ngFor","ngForOf"],[1,"thumbnail-btn",3,"click"],["loading","lazy","appDefaultImage","","decoding","async",1,"thumbnail-image",3,"src","alt"],[1,"payment-methods"],[1,"payment-chips"],["class","payment-chip",3,"class",4,"ngFor","ngForOf"],[1,"payment-chip"],[1,"related-products-grid","no-scroll"],[3,"product",4,"ngFor","ngForOf"],[3,"product"],[1,"no-products"],[1,"loading-container"],[1,"loading-skeleton"],[1,"skeleton-image"],[1,"skeleton-info"],[1,"skeleton-line","skeleton-price"],[1,"skeleton-line","skeleton-title"],[1,"skeleton-line","skeleton-location"],[1,"skeleton-line","skeleton-description"],[1,"not-found"],["mat-stroked-button","","routerLink","/home"]],template:function(d,c){d&1&&(n(0,"div",0),p(1,"app-header"),m(2,be,78,25,"main",1)(3,ve,9,0,"div",2)(4,xe,5,0,"div",3),p(5,"app-footer"),t()),d&2&&(r(2),l("ngIf",!c.isLoading&&c.product),r(),l("ngIf",c.isLoading),r(),l("ngIf",!c.isLoading&&!c.product))},dependencies:[V,R,j,U,G,$,Z,J,Y,X,oe,de,Q,ie,ne,re,ee],styles:['@charset "UTF-8";.product-detail-page[_ngcontent-%COMP%]{min-height:100vh;background:#dfe0d5}.main-content[_ngcontent-%COMP%]{padding:2rem 12%;min-height:77vh}.breadcrumb-container[_ngcontent-%COMP%]{background:transparent;padding:8px 0}.breadcrumb-container[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{margin:0 auto}.not-found[_ngcontent-%COMP%]{width:100%;min-height:60vh;display:flex;flex-direction:column;align-items:center;justify-content:center}.breadcrumb[_ngcontent-%COMP%]{font-size:1.5rem;color:#152047}.breadcrumb[_ngcontent-%COMP%]   .breadcrumb-link[_ngcontent-%COMP%]{font-weight:700;text-decoration:none}.breadcrumb[_ngcontent-%COMP%]   .breadcrumb-link[_ngcontent-%COMP%]:hover{text-decoration:underline}.breadcrumb[_ngcontent-%COMP%]   .breadcrumb-separator[_ngcontent-%COMP%]{margin:0 8px}.product-card[_ngcontent-%COMP%]{width:90%;margin:30px auto 40px;padding:3.2rem 6%;background:#f9f9ed;border:2px solid #152047;box-shadow:0 10px 12px #00000089;border-radius:12px;box-shadow:0 4px 8px #0000001f}.product-layout[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start}.product-card.no-thumbnails[_ngcontent-%COMP%]{width:80%}.product-card.no-thumbnails[_ngcontent-%COMP%]   .product-layout[_ngcontent-%COMP%]{flex-direction:row}.product-card.no-thumbnails[_ngcontent-%COMP%]   .main-image-container[_ngcontent-%COMP%]{width:60%;height:auto}.product-card.no-thumbnails[_ngcontent-%COMP%]   .product-info[_ngcontent-%COMP%]{width:40%}.image-thumbnails[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.image-thumbnails[_ngcontent-%COMP%]   .thumbnail-btn[_ngcontent-%COMP%]{width:100px;height:82px;border:2px solid transparent;border-radius:4px;box-shadow:0 4px 8px #00000089;overflow:hidden;transition:border-color .2s}.image-thumbnails[_ngcontent-%COMP%]   .thumbnail-btn.active[_ngcontent-%COMP%], .image-thumbnails[_ngcontent-%COMP%]   .thumbnail-btn[_ngcontent-%COMP%]:hover{border-color:#152047}.image-thumbnails[_ngcontent-%COMP%]   .thumbnail-image[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.image-thumbnails[_ngcontent-%COMP%]:empty{display:none}.main-image-container[_ngcontent-%COMP%]{position:relative;width:400px;height:320px;box-shadow:0 6px 9px #00000089;border:2px solid #152047;border-radius:4px;overflow:hidden}.main-image-container[_ngcontent-%COMP%]   .main-image[_ngcontent-%COMP%]{width:400px;height:320px;object-fit:cover}.main-image-container.full[_ngcontent-%COMP%]{width:400px!important;height:320px!important}.product-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:300px;margin:auto 0;justify-content:space-between;color:#152047;width:35%}.product-info[_ngcontent-%COMP%]   .product-info-top[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px;color:#152047}.product-info[_ngcontent-%COMP%]   .condition-badge[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:600}.product-info[_ngcontent-%COMP%]   .product-price[_ngcontent-%COMP%]{font-size:2rem;font-weight:700}.product-info[_ngcontent-%COMP%]   .product-title[_ngcontent-%COMP%]{font-size:1.45rem;font-weight:600;text-transform:uppercase;line-height:1}.product-info[_ngcontent-%COMP%]   .product-location[_ngcontent-%COMP%]{font-size:1.1rem;display:flex;align-items:center;gap:4px}.product-info[_ngcontent-%COMP%]   .product-date[_ngcontent-%COMP%]{font-size:1rem;display:flex;align-items:center;gap:4px;color:#666}.payment-methods[_ngcontent-%COMP%]{margin-top:4px}.payment-chips[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:6px}.payment-chips[_ngcontent-%COMP%]   .payment-chip[_ngcontent-%COMP%]{padding:6px 15px;border-radius:4px;font-size:1rem;font-weight:600;color:#fff}.payment-chips[_ngcontent-%COMP%]   .payment-chip.efectivo[_ngcontent-%COMP%]{background:#28a745}.payment-chips[_ngcontent-%COMP%]   .payment-chip.trueque[_ngcontent-%COMP%]{background:#b76a38}.payment-chips[_ngcontent-%COMP%]   .payment-chip.tarjeta[_ngcontent-%COMP%]{background:#9c27b0}.payment-chips[_ngcontent-%COMP%]   .payment-chip.transferencia[_ngcontent-%COMP%]{background:#1565c0}.section-title[_ngcontent-%COMP%]{margin-bottom:20px;font-size:1.5rem;font-weight:600;color:#152047}.seller-section[_ngcontent-%COMP%], .product-section[_ngcontent-%COMP%]{width:90%;margin:0 auto 50px}.seller-section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .seller-section[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .product-section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .product-section[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{word-break:break-all}.seller-info-card[_ngcontent-%COMP%], .product-description-card[_ngcontent-%COMP%]{padding:24px;background:#f9f9ed;border:1px solid #152047;border-radius:5px;box-shadow:0 4px 20px #0000001a}.seller-info-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}.seller-info-card[_ngcontent-%COMP%]   .seller-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px}.seller-info-card[_ngcontent-%COMP%]   .seller-item[_ngcontent-%COMP%]   .seller-details[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:8px}.seller-info-card[_ngcontent-%COMP%]   .seller-item[_ngcontent-%COMP%]   .seller-icon[_ngcontent-%COMP%]{font-size:24px;color:#152047}.seller-info-card[_ngcontent-%COMP%]   .seller-item[_ngcontent-%COMP%]   .seller-label[_ngcontent-%COMP%]{font-size:.875rem;color:#666;font-weight:500}.seller-info-card[_ngcontent-%COMP%]   .seller-item[_ngcontent-%COMP%]   .seller-value[_ngcontent-%COMP%]{font-size:1rem;color:#333;font-weight:600}.seller-info-card[_ngcontent-%COMP%]   .seller-item[_ngcontent-%COMP%] + .seller-item[_ngcontent-%COMP%]{border-top:1px solid #e0e0e0;padding-top:12px}.product-description-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:16px;font-size:1rem;font-weight:500;color:#152047;line-height:1.6}.product-description-card[_ngcontent-%COMP%]   p.measurements[_ngcontent-%COMP%]{font-size:.875rem;color:#666;margin-bottom:0}.product-description-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:last-child{margin-bottom:0}.related-products-section[_ngcontent-%COMP%]{width:90%;margin:0 auto 32px}.related-products-grid[_ngcontent-%COMP%]{display:grid;gap:24px;justify-content:center;grid-template-columns:repeat(auto-fill,minmax(max(22%,240px),1fr))}@media (max-width: 640px){.related-products-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}.related-products-grid[_ngcontent-%COMP%]   app-product-card-small[_ngcontent-%COMP%]{width:100%;max-width:none}.loading-container[_ngcontent-%COMP%]{padding:32px 0}.loading-skeleton[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:48px}.skeleton-image[_ngcontent-%COMP%], .skeleton-line[_ngcontent-%COMP%]{border-radius:12px;background:linear-gradient(90deg,#f0f0f0 25%,#e0e0e0,#f0f0f0 75%);background-size:200% 100%;animation:_ngcontent-%COMP%_loading 1.5s infinite}.skeleton-image[_ngcontent-%COMP%]{height:400px}.skeleton-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.skeleton-info[_ngcontent-%COMP%]   .skeleton-price[_ngcontent-%COMP%]{height:60px;width:60%}.skeleton-info[_ngcontent-%COMP%]   .skeleton-title[_ngcontent-%COMP%]{height:32px;width:80%}.skeleton-info[_ngcontent-%COMP%]   .skeleton-location[_ngcontent-%COMP%]{height:20px;width:50%}.skeleton-info[_ngcontent-%COMP%]   .skeleton-description[_ngcontent-%COMP%]{height:100px;width:100%}@keyframes _ngcontent-%COMP%_loading{0%{background-position:200% 0}to{background-position:-200% 0}}@media (max-width: 1024px){.main-image-container[_ngcontent-%COMP%]{width:340px;height:255px}.product-actions[_ngcontent-%COMP%]   .contact-btn[_ngcontent-%COMP%]{width:240px}.image-thumbnails[_ngcontent-%COMP%]{gap:10px}.image-thumbnails[_ngcontent-%COMP%]   .thumbnail-btn[_ngcontent-%COMP%]{width:84px;height:62px}}@media (max-width: 680px){.product-layout[_ngcontent-%COMP%]{flex-direction:column;gap:32px}.image-thumbnails[_ngcontent-%COMP%]{flex-direction:row;justify-content:center}.main-image-container[_ngcontent-%COMP%]{width:100%;height:auto}.product-card[_ngcontent-%COMP%]{padding:24px}.product-actions[_ngcontent-%COMP%]   .contact-btn[_ngcontent-%COMP%]{width:100%}}@media (max-width: 480px){.main-image-container[_ngcontent-%COMP%]{height:300px}.product-price[_ngcontent-%COMP%]{font-size:1.75rem}.product-title[_ngcontent-%COMP%]{font-size:1.125rem}}']});let a=s;return a})();var Xe=[{path:":id",component:ce,title:"Detalle del producto - Privium",data:{description:"Detalles del producto en Privium marketplace",keywords:"producto, detalle, comprar, privium, marketplace"}},{path:"",redirectTo:"/home",pathMatch:"full"}];export{Xe as productRoutes};
