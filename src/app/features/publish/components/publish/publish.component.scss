@import "../../../../../shared/styles/variables";

/* ===================== Base layout ===================== */
.publish-page {
  min-height: 100vh;
  display: flex;
  flex-direction: column;
  background: $background;
  overflow-x: hidden;
}

.publish-main {
  flex: 1;
  display: flex;
  flex-direction: column;
  width: 70%;
  margin: 120px auto;
  gap: 60px;
  min-height: 58vh;
  padding: 0 2rem;

  @media (max-width: 1400px) { width: 75%; margin: 100px auto; gap: 50px; }
  @media (max-width: $breakpoint-lg) { width: 85%; margin: 100px auto; gap: 45px; }
  @media (max-width: $breakpoint-md) { width: 90%; margin: 90px auto; gap: 35px; padding: 0 1.5rem; }
  @media (max-width: 768px) { width: 92%; margin: 40px auto; gap: 30px; padding: 0 1rem; }
  @media (max-width: $breakpoint-sm) {
    width: 94%;
    margin: 50px auto;
    gap: 20px;
    padding: 0 0.8rem;
    font-size: 0.97rem;

    .step-header {
      .step-title { font-size: 1.8rem; line-height: 1.2; }
      .step-indicator { font-size: 1.4rem; margin-bottom: 1rem; }
    }

    input, textarea, select { font-size: 0.95rem; padding: 10px 8px; }
  }
  @media (max-width: 480px) {
    margin: 35px auto;
    gap: 16px;
    padding: 0 0.75rem;

    .step-header {
      .step-title { font-size: 1.6rem; }
      .step-indicator { font-size: 1.2rem; }
    }

    input, textarea, select { font-size: 0.9rem; padding: 8px 6px; }
  }
  @media (max-width: 360px) {
    gap: 12px; padding: 0 0.25rem;
    .step-header {
      .step-title { font-size: 1.4rem; }
      .step-indicator { font-size: 1.1rem; }
    }
  }
}

/* ===================== Step header ===================== */
.step-header {
  margin-bottom: 3rem;
  text-align: left;

  .step-indicator {
    display: block;
    margin-bottom: 1.2rem;
    font-size: 1.9rem;
    color: $text-light;
    line-height: 1.2;
  }
  .step-title {
    margin: 0;
    font-size: 2.3rem;
    font-weight: 750;
    color: $primary-navy;
    line-height: 1.2;
  }

  @media (max-width: 900px) { margin-bottom: 2.5rem; .step-indicator {font-size: 1.7rem;} .step-title {font-size: 2.1rem;} }
  @media (max-width: $breakpoint-md) { margin-bottom: 2rem; .step-indicator {font-size: 1.5rem;} .step-title {font-size: 1.9rem;} }
  @media (max-width: 680px) { margin-bottom: 1.8rem; .step-indicator {font-size: 1.4rem;} .step-title {font-size: 1.8rem;} }
  @media (max-width: $breakpoint-sm) { margin-bottom: 1.5rem; .step-indicator {font-size: 1.3rem;} .step-title {font-size: 1.6rem;} }
  @media (max-width: 480px) { margin-bottom: 1.2rem; .step-indicator {font-size: 1.2rem;} .step-title {font-size: 1.5rem;} }
  @media (max-width: 360px) { margin-bottom: 1rem; .step-indicator {font-size: 1.1rem;} .step-title {font-size: 1.4rem;} }
}

/* ===================== Utilities ===================== */
.w-100 { width: 100%; }

/* ===================== Price input (Material) ===================== */
.price-input {
  max-width: 400px; width: 100%;
  @media (max-width: 768px) { max-width: 350px; }
  @media (max-width: 480px) { max-width: 100%; }

  :deep(.mat-mdc-form-field) {
    width: 100%;

    .mat-mdc-text-field-wrapper {
      .mdc-text-field {
        width: 100%;
        background-color: $background-secondary;
        border-radius: 8px;
        border: 2px solid transparent;
        transition: all .3s ease;

        &:hover { border-color: rgba($primary-navy, .2); }
        &.mdc-text-field--focused {
          border-color: $primary-navy;
          box-shadow: 0 0 0 3px rgba($primary-navy, .1);
        }

        .mdc-text-field__input {
          font-size: 1.1rem; font-weight: 600; color: $primary-navy; padding: 14px 16px;
          @media (max-width: 768px) { font-size: 1rem; padding: 12px 14px; }
          @media (max-width: 480px) { font-size: .95rem; padding: 10px 12px; }
        }
        .mdc-text-field__prefix {
          font-size: 1.2rem; font-weight: 700; color: $primary-navy; padding-left: 16px;
          @media (max-width: 768px) { font-size: 1.1rem; padding-left: 14px; }
          @media (max-width: 480px) { font-size: 1rem; padding-left: 12px; }
        }
      }
    }
    .mat-mdc-form-field-error {
      font-size: .9rem; color: #f44336; margin-top: 4px;
      @media (max-width: 480px) { font-size: .8rem; }
    }
  }
}

/* ===================== Payment grid ===================== */
.payment-grid {
  display: grid;
  width: 100%;
  max-width: 500px;
  grid-template-columns: repeat(2, 1fr);
  gap: 1.5rem;
  margin: 0;

  @media (min-width: 1200px) { max-width: 600px; gap: 1.8rem; }
  @media (max-width: 1200px) { max-width: 500px; }
  @media (max-width: $breakpoint-md) { max-width: 450px; gap: 1.2rem; }
  @media (max-width: 680px) { max-width: 100%; gap: 1rem; }

  p {
    margin: 0;
    font-size: 1rem !important;
    font-weight: 600;
    color: $primary-navy !important;
    line-height: 1.3;
    @media (max-width: 768px) { font-size: .95rem !important; }
    @media (max-width: 480px) { font-size: .9rem !important; }
  }
}

/* Labels de checkbox/radio */
label.mdc-label {
  font-size: 1rem !important; color: $primary-navy !important;
  @media (max-width: 768px) { font-size: .95rem !important; }
  @media (max-width: 480px) { font-size: .9rem !important; }
}

/* ===================== Publish final (buttons) ===================== */
.publish-final {
  display: flex; justify-content: flex-end; gap: 1.5rem; margin: 2rem 0; padding: 0 1rem;

  .cancel-button {
    width: 150px;
    background: transparent;
    border: 0;
    font-size: 1.2rem;
    font-weight: 500;
    color: $primary-navy !important;
    transition: opacity .3s ease;
    &:hover { opacity: .8; }
  }

  @media (max-width: 900px) { padding: 0 .8rem; gap: 1.2rem; }
  @media (max-width: $breakpoint-md) {
    flex-direction: column; align-items: center; gap: 1rem; padding: 0 .6rem;
    button { width: 100%; min-height: 45px; }
  }
  @media (max-width: 480px) {
    margin: 1.5rem 0; padding: 0 .25rem; gap: .8rem;
    button { min-height: 40px; }
    .cancel-button { font-size: 1.1rem; }
  }
  @media (max-width: 360px) { margin: 1rem 0; padding: 0; }
}

/* ===================== Photos upload ===================== */
.photos-section {
  display: flex;
  flex-direction: column;
  gap: 1rem;
  padding: 1.25rem; /* más aire base */
  background: #1520471b;
  border-radius: 8px;

  @media (max-width: 480px) { padding: 1rem; }

  &.has-images {
    background: transparent;
    padding: 0.75rem; /* dejamos colchón con imágenes */
    @media (max-width: 1200px) { padding: 0; }
  }
}

.photo-upload-area {
  display: flex;
  justify-content: center;
  align-items: center;
  border: 1px dashed $primary-navy;
  border-radius: 8px;
  transition: border-color .3s ease;
  padding: 1rem;

  &:hover { border-color: darken($primary-navy, 10%); }

  &.has-images { border: none; padding: 0.25rem; } /* mínimo padding */

  .file-input { display: none; }
}

.upload-prompt {
  display: flex; flex-direction: column; justify-content: center; align-items: center;
  cursor: pointer; gap: 1rem; width: 100%; padding: 2rem; text-align: center;

  @media (max-width: $breakpoint-md) { padding: 1.5rem; gap: .8rem; }
  @media (max-width: 480px) { padding: 1rem; gap: .6rem; }

  .upload-header { display: flex; flex-direction: column; align-items: center; gap: .5rem;
    @media (max-width: 480px) { gap: .3rem; }
  }
  mat-icon {
    width: 48px; height: 48px; font-size: 48px; color: $primary-navy;
    @media (max-width: $breakpoint-md) { width: 40px; height: 40px; font-size: 40px; }
    @media (max-width: 480px) { width: 32px; height: 32px; font-size: 32px; }
  }
  p { margin: 0; font-size: 1.1rem; font-weight: 600; color: $primary-navy;
    @media (max-width: $breakpoint-md) { font-size: 1rem; }
    @media (max-width: 480px) { font-size: .9rem; }
  }
  small { font-size: .9rem; color: $text-light;
    @media (max-width: $breakpoint-md) { font-size: .8rem; }
    @media (max-width: 480px) { font-size: .75rem; }
  }
}

/* ===================== Image previews (FLEX ROW + mismo tamaño) ===================== */
.image-preview-grid {
  --thumb: clamp(100px, 170px, 180px); /* desktop ~140, se reduce en móviles */

  display: flex !important;
  flex-direction: row;
  flex-wrap: wrap;
  align-items: flex-start;
  justify-content: flex-start;

  gap: clamp(0.6rem, 2.5vw, 1.25rem);
  padding: clamp(16px, 4vw, 20px);

  @media (max-width: 1200px) { padding: 4px; }
  @media (max-width: 600px) { --thumb: clamp(110px, 130px, 150px); }
  @media (max-width: 480px) { --thumb: clamp(100px, 120px, 140px); }
  @media (max-width: 400px) { --thumb: clamp(90px, 110px, 130px); }
}

.image-preview-item,
.add-more-images {
  position: relative;
  width: var(--thumb);
  height: var(--thumb);
  flex: 0 0 var(--thumb);
  aspect-ratio: 1;
  border-radius: 8px;
  display: flex; align-items: center; justify-content: center;
}

.image-preview-item {
  overflow: hidden;
  background: $background-secondary;
  border: 2px solid rgba($primary-navy, 0.1);

  img {
    width: 100%; height: 100%;
    object-fit: cover;
    transition: transform .2s ease;
  }
  &:hover img { transform: scale(1.02); }

  .remove-image {
    position: absolute; top: 8px; right: 8px;
    display: flex; align-items: center; justify-content: center;
    width: 32px; height: 32px; border-radius: 50%;
    background: rgba(244, 67, 54, 0.9); color: #fff;
    border: 2px solid #fff; cursor: pointer; transition: all .2s ease;
    min-width: none !important;

    &:hover { background: rgba(244, 67, 54, 1); transform: scale(1.1); }
    mat-icon { font-size: 18px; width: 18px; height: 18px; }
  }
}

.add-more-images {
  cursor: pointer;
  border: 2px dashed $primary-navy;
  background: transparent;
  gap: .5rem;
  flex-direction: column;
  transition: all .3s ease;

  &:hover {
    border-color: darken($primary-navy, 10%);
    color: $primary-navy;
    background: rgba($primary-navy, .02);
    transform: translateY(-2px);
  }

  mat-icon { font-size: 24px; @media (max-width: 480px) { font-size: 20px; } }
  span { font-size: .875rem; font-weight: 500; @media (max-width: 480px) { font-size: .8rem; } }
}

/* ===================== Categories dropdown ===================== */
.categories-container {
  display: flex; flex-wrap: wrap; gap: 12px; align-items: flex-start; justify-content: flex-start;
}
.cat-slot {
  position: relative; flex: 0 0 auto; overflow: visible;
}
.dropdown-wrapper {
  position: absolute; top: calc(100% + 4px); left: 0; z-index: 2000;
  width: auto; max-width: none; margin-top: .5rem;
  box-shadow: 0 4px 12px rgba(0,0,0,.15); border-radius: 6px; overflow: visible;
  @media (max-width: 480px) { width: 100%; left: 0; right: 0; }
}

/* ===================== Publish button ===================== */
.publish-button {
  height: 48px;
  padding: .8rem 2.5rem;
  border: 0; border-radius: 8px;
  background: #4caf50 !important; color: $white !important;
  font-weight: 600; font-size: 1.5rem; letter-spacing: .5px;
  transition: all .3s ease; min-width: 180px;
  display: inline-flex; align-items: center; justify-content: center;

  &:hover { background: darken(#4caf50, 5%) !important; transform: translateY(-1px); box-shadow: 0 4px 12px rgba(76,175,80,.3); }
  &:active { transform: translateY(0); }
  &:disabled {
    background: #9e9e9e !important; color: #ffffff80 !important; cursor: not-allowed;
    opacity: .6; transform: none !important; box-shadow: none !important;
  }

  @media (max-width: 900px) { height: 45px; font-size: 1.4rem; min-width: 160px; }
  @media (max-width: 768px) { height: 42px; font-size: 1.3rem; padding: .6rem 2rem; min-width: 140px; }
  @media (max-width: 480px) { height: 40px; font-size: 1.2rem; padding: .5rem 1.5rem; width: 100%; min-width: auto; }
  @media (max-width: 360px) { height: 38px; font-size: 1.1rem; }
}

.radio-input{
  @media (max-width: 480px) { transform: translateX(10px); }
}
