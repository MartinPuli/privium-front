<div class="auth-page">
  <!-- Cabecera / pie comunes -->
  <app-header [logged]="false"></app-header>

  <div class="auth-main">
    <!-- 1) Éxito: mostramos ResultWarn -->
    <app-result-warn
      *ngIf="success"
      [status]="1"
      title="¡Revisa tu correo!"
      subtitle="Te enviamos un enlace para restablecer tu contraseña."
      description="Si no lo encuentras revisa la carpeta de spam. El enlace expirará en 30 minutos."
      buttonLabel="Ir al inicio de sesión"
      (action)="goToLogin()"
      class="fp-result"
    ></app-result-warn>

    <!-- 2) Formulario para solicitar el link -->
    <app-auth-card
      *ngIf="!success"
      maxWidth="70%"
      title="¿Olvidaste tu contraseña?"
      subtitle="Ingresa tu email y te enviaremos un enlace para restablecerla."
      [buttons]="buttons"
      [links]="links"
    >
      <form
        id="emailForm"
        [formGroup]="emailForm"
        (ngSubmit)="onSubmit()"
        class="fp-form"
      >
        <app-form-field
          label="Email"
          type="email"
          placeholder="tucorreo@ejemplo.com"
          formControlName="email"
          [hasError]="
            emailForm.get('email')!.invalid && emailForm.get('email')!.touched
          "
          [errorMessage]="
            emailForm.get('email')!.hasError('required')
              ? 'El email es requerido'
              : emailForm.get('email')!.hasError('email')
              ? 'Email inválido'
              : ''
          "
        ></app-form-field>
      </form>
    </app-auth-card>
  </div>

  <app-footer [logged]="false"></app-footer>
</div>
