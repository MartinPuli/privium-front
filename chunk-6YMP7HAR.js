import{da as u,ga as m,k as g}from"./chunk-ZV4XMZTK.js";import{a as c,ba as d,d as a,fa as h,s as o}from"./chunk-WDZL7NPB.js";var C=(()=>{let r=class r{constructor(t,s){this.http=t,this.auth=s,this.base=`${u.apiBaseUrl}/listings/`}listListings(t={}){let s=c({sortOrder:t.sortOrder??"DESC",page:t.page??1,pageSize:t.pageSize??20},t);return this.http.post(this.base+"listListings",s)}getListingInfo(t){return this.http.get(`${this.base}info/${t}`)}addListing(t,s,e=[]){t.type==="SERVICIO"&&(t.condition=2);let n=new FormData;return n.append("data",new Blob([JSON.stringify(t)],{type:"application/json"})),n.append("mainImage",s,s.name),e.slice(0,4).forEach(i=>n.append("images",i,i.name)),this.http.post(this.base+"addListing",n)}editListing(t,s,e=[]){t.type==="SERVICIO"&&(t.condition=2);let n=new FormData;return n.append("data",new Blob([JSON.stringify(t)],{type:"application/json"})),s&&n.append("mainImage",s,s.name),e&&e.length&&e.slice(0,4).forEach((i,f)=>{i&&n.append(`image${f+1}`,i,i.name)}),this.http.post(`${this.base}editListing`,n)}manageListingStatus(t){return this.http.post(this.base+"listingStatus",t)}getNeighborhoodProducts(t=1,s=3,e=10){return a(this,null,function*(){let i=(yield o(this.listListings({centerCountryId:this.auth.getCurrentCountryId(),maxDistanceKm:e,page:t,pageSize:s,notShownUser:this.auth.getCurrentUserId()}))).data;return{products:i,hasMore:i.length===s}})}getProductsByCategory(t,s=1,e=4){return a(this,null,function*(){let i=(yield o(this.listListings({categoryIds:t,page:s,pageSize:e,notShownUser:this.auth.getCurrentUserId()}))).data;return{products:i,hasMore:i.length===e}})}getProductsByType(t,s=1,e=4){return a(this,null,function*(){let i=(yield o(this.listListings({type:t,page:s,pageSize:e,notShownUser:this.auth.getCurrentUserId()}))).data??[];return{products:i,hasMore:i.length===e}})}};r.\u0275fac=function(s){return new(s||r)(h(g),h(m))},r.\u0275prov=d({token:r,factory:r.\u0275fac,providedIn:"root"});let p=r;return p})();export{C as a};
